<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premier Institute — Profile</title>
<style>
body {
  margin:0; font-family: Arial,sans-serif;
  background: linear-gradient(135deg, #fdfbfb, #8FBFFA);
  color:#074A9C; min-height:100vh; padding:20px;
}
.container { max-width:600px; margin:80px auto 40px; display:flex; flex-direction:column; gap:20px; }
.block { background:#fff; padding:20px; border-radius:20px; box-shadow:0 4px 12px rgba(0,0,3,0.1); }
.block h2 { margin:0 0 10px 0; color:#003366; font-size:18px; }
.block input { width:100%; padding:10px; border:1px solid #d8dce0; border-radius:10px; font-size:14px; background:#fcfeff; outline:none; }
.block input:disabled { background:#e0e0e0; color:#555; }
.block input:focus { border-color:#8FBFFA; box-shadow:0 4px 14px rgba(102,166,255,0.16); }
.account-status { font-weight:bold; padding:8px 12px; border-radius:12px; display:inline-block; margin-top:5px; }
.status-safe { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
.status-warning { background:#fff3cd; color:#856404; border:1px solid #ffeeba; }
.status-danger { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }
</style>
</head>
<body>

<div class="container">

  <div class="block">
    <h2>Your Profile</h2>
    <p>Your name and other details</p>
  </div>

  <div class="block">
    <h2>Name</h2>
    <input type="text" id="profileName" />
  </div>

  <div class="block">
    <h2>Class</h2>
    <input type="text" id="profileClass" />
  </div>

  <div class="block">
    <h2>Number</h2>
    <input type="text" id="profileNumber" />
  </div>

  <div class="block">
    <h2>Batch</h2>
    <input type="text" id="profileBatch" />
  </div>

  <div class="block">
    <h2>Date of Join</h2>
    <input type="text" id="profileJoinDate" readonly />
  </div>

  <div class="block">
    <h2>Account Status</h2>
    <span id="accountStatus" class="account-status status-safe">Safe</span>
  </div>

  <button onclick="saveProfile()" style="padding:12px; border:none; border-radius:10px; background:#66a6ff; color:#fff; font-weight:bold; cursor:pointer;">Save Changes</button>
</div>

<script>
// ==== CONFIG ====
const userKey = "currentUser";
const joinKey = "joinDate";
const editLogKey = "editTimestamps"; // tracks last edit per field

// ==== LOAD PROFILE ====
let user = JSON.parse(localStorage.getItem(userKey) || "{}");
const editLog = JSON.parse(localStorage.getItem(editLogKey) || "{}");

// Set join date if first visit
let joinDate = localStorage.getItem(joinKey);
if(!joinDate){
  joinDate = new Date().toLocaleDateString();
  localStorage.setItem(joinKey, joinDate);
}
document.getElementById("profileJoinDate").value = joinDate;

// Helper: check if editable
function canEdit(field){
  if(user[field]) return false; // already set
  const lastEdit = editLog[field];
  if(!lastEdit) return true; // never edited
  const diff = Date.now() - lastEdit;
  return diff >= 7*24*60*60*1000; // 1 week
}

// Autofill and readonly logic
['Name','Class','Number','Batch'].forEach(f=>{
  const el = document.getElementById("profile"+f);
  el.value = user[f] || "";
  if(!canEdit(f)){
    el.disabled = true;
  }
});

// Account status
const statusEl = document.getElementById("accountStatus");
if(!user.Number){
  statusEl.textContent = "Warning"; statusEl.className = "account-status status-warning";
} else if(localStorage.getItem("USERBANED")){
  statusEl.textContent = "Banned"; statusEl.className = "account-status status-danger";
} else {
  statusEl.textContent = "Safe"; statusEl.className = "account-status status-safe";
}

// ==== SAVE LOGIC ====
function saveProfile(){
  ['Name','Class','Number','Batch'].forEach(f=>{
    const el = document.getElementById("profile"+f);
    if(canEdit(f) && el.value.trim()){
      user[f] = el.value.trim();
      editLog[f] = Date.now();
      el.disabled = true;
    }
  });
  localStorage.setItem(userKey, JSON.stringify(user));
  localStorage.setItem(editLogKey, JSON.stringify(editLog));
  alert("✅ Profile updated (if editable fields changed)");
}
</script>
</body>
</html>